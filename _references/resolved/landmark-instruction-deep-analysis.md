# 指標ベース指示の動作不良に関する詳細分析

## 1. 問題の詳細

「スタートから、オブジェクトまでまっすぐ下に進みます」という明確な指標がある指示が機能していない。

<br />

## 2. 根本原因の分析

### 2.1. プロンプトの構造的問題

現在のプロンプトは以下の順序で処理される：

1. **最優先制約** - 数値移動の禁止を強調
2. **移動条件** - 目印の存在を必須条件として定義
3. **指示の解釈** - 指示形式の説明

この構造により、AIは「制約」に過度に注目し、「実行可能な指示」の理解が後回しになっている。

### 2.2. 否定的な表現の多用

現在のプロンプトの問題点：
- 「〜できません」「〜は不可能」という否定的表現が多い
- 「数値は認識不能」「移動は不可能」などの強い制約
- AIは否定的な指示により、全体的に移動を抑制する傾向

### 2.3. 目印の認識に関する曖昧さ

- 「オブジェクトまで」という指示で、実際にオブジェクトを認識できているか不明
- 認識可能なオブジェクトの位置は示されているが、それが移動可能な目標として明確に定義されていない

### 2.4. 指示の優先順位の逆転

本来の優先順位：
1. 指標ベースの移動は**常に実行可能**
2. 数値のみの移動は**変換または無視**

現在の優先順位：
1. 移動の制約が最優先
2. 指標ベースの移動も制約の影響を受ける

<br />

## 3. 改善案

### 3.1. プロンプト構造の再編成

1. **ポジティブファースト・アプローチ**
   - まず「できること」を明確に定義
   - その後で「できないこと」を補足的に説明

2. **セクションの順序変更**
   - 役割と基本機能
   - 実行可能な移動（指標ベース）
   - 数値指示の変換ルール（禁止ではなく変換）

### 3.2. 表現の改善

否定的表現から肯定的表現へ：
- 「数値移動は不可能」→「指標ベースで移動します」
- 「目印がないと移動できない」→「目印を見つけて移動します」

### 3.3. 明確な動作定義

1. **基本動作モード**
   ```
   あなたの基本動作：
   - 指標（オブジェクト、端、壁）への移動を実行
   - 数値指示は指標ベースに変換して実行
   ```

2. **優先順位の明確化**
   ```
   1. 指標が明示されている → その指標まで移動
   2. 数値のみ指定 → 方向の指標を探して移動
   3. 指標がない → 移動しない
   ```

### 3.4. 具体的な実装方針

1. **新セクション「基本移動能力」を最初に配置**
   - あなたは指標ベースで移動するロボット
   - オブジェクト、端、壁などを認識して移動

2. **「数値指示の変換」セクション**
   - 禁止ではなく、変換ルールとして説明
   - 数値→指標への変換方法を明確化

3. **成功例を最初に提示**
   - 正しく動作する例を先に示す
   - 失敗例は補足として後に配置

<br />

## 4. 実装の要点

1. 制約よりも能力を先に定義
2. 否定形より肯定形を使用
3. 指標ベース移動を基本機能として強調
4. 数値指示は「エラー」ではなく「変換対象」として扱う