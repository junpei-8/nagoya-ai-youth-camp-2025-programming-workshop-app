<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8" />
        <title>Map 3</title>
        <link rel="stylesheet" href="./style.css" />
        <script type="module" defer>
            import { OPENAI_API_KEY } from '../../secret.js';
            import { fetchRoutePathWithOpenAI } from '../../ai-fetch.js';
            import { generateSystemPrompt } from '../../ai-system-prompt.js';
            import { setupGame } from '../../game.js';
            import { routePrompt } from './ai-route-prompt.js';
            import { mapConfig } from './map.js';

            // ゲームをセットアップ
            await setupGame({
                mapConfig,
                pathFetcher: () =>
                    fetchRoutePathWithOpenAI({
                        apiKey: OPENAI_API_KEY,
                        systemPrompt: generateSystemPrompt(mapConfig),
                        routePrompt,
                    }),
            });
        </script>
    </head>
    <body>
        <div id="game-viewer"></div>
        <div id="game-response-viewer"></div>
        <button id="game-trigger"></button>
    </body>
</html>
